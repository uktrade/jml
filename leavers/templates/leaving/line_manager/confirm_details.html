{% extends "leaving/leaving_base.html" %}
{% load crispy_forms_tags crispy_forms_gds %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {% error_summary form %}
        </div>
    </div>

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h1 class="govuk-heading-l">Confirm all the information</h1>
            <p class="govuk-body">Before confirming and sending information, please review all the following.</p>
        </div>
    </div>

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h2 class="govuk-heading-m">Personal information</h2>
            {% include "staff_search/staff_result.html" with staff_details=leaver %}

            <h2 class="govuk-heading-m">Leaver's data transfer</h2>
            {% include "staff_search/staff_result.html" with staff_details=data_recipient %}
            <a href="{{ leaver_confirmation_view_url }}" class="govuk-button govuk-button--secondary" data-module="govuk-button">Edit information</a>
        </div>
    </div>
    
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h2 class="govuk-heading-m">Last day</h2>
            <p class="govuk-body">{{ last_day }}</p>
            <a href="{{ leaver_confirmation_view_url }}" class="govuk-button govuk-button--secondary" data-module="govuk-button">Edit information</a>
        </div>
    </div>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h2 class="govuk-heading-m">Leaving date</h2>
            <p class="govuk-body">{{ leaving_date }}</p>
            <a href="{{ leaver_confirmation_view_url }}" class="govuk-button govuk-button--secondary" data-module="govuk-button">Edit information</a>
        </div>
    </div>
    
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h2 class="govuk-heading-m">Leaver's UKSBS Form</h2>

            <table class="govuk-table">
                <tbody class="govuk-table__body">
                    {% for key, value in uksbs_pdf_data.items %}
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">{{ key }}</th>
                            <td class="govuk-table__cell">{{ value }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            <a href="{{ uksbs_upload_view_url }}" class="govuk-button govuk-button--secondary" data-module="govuk-button">Edit information</a>
        </div>
    </div>

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h2 class="govuk-heading-m">Security information</h2>

            <table class="govuk-table">
                <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">Security clearance</th>
                        <td class="govuk-table__cell">{{ has_security_clearance }}</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">Government Procurement Card</th>
                        <td class="govuk-table__cell">{{ is_rosa_user }}</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">ROSA kit</th>
                        <td class="govuk-table__cell">{{ holds_government_procurement_card }}</td>
                    </tr>
                </tbody>
            </table>

            <a href="{{ details_view_url }}" class="govuk-button govuk-button--secondary" data-module="govuk-button">Edit information</a>
        </div>
    </div>
    
    <form method="POST">
        {% crispy form %}
    </form>
{% endblock %}
